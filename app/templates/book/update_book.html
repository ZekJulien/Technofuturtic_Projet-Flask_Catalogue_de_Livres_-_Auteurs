<h3 class="text-xl font-bold">Books details</h3>
<div class="divider divider-primary"></div>
{% if form.errors %}
<div class="alert alert-error">
	<ul>
		{% for field, errors in form.errors.items() %}
		{% for error in errors %}
		<li>{{ field }} : {{ error }}</li>
		{% endfor %}
		{% endfor %}
	</ul>
</div>
{% endif %}
<form method="POST" id="bookForm" action="{{ url_for('book.update_book') }}">
	{{ form.hidden_tag() }}
	<input type="hidden" name="id" value="{{ book.id }}">
	<label class="label text-white">{{ form.title.label }}</label>
	<label class="input input-primary w-full mt-1">
		<label class="label">
			<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed">
				<path
					d="M554-120q-54 0-91-37t-37-89q0-76 61.5-137.5T641-460q-3-36-18-54.5T582-533q-30 0-65 25t-83 82q-78 93-114.5 121T241-277q-51 0-86-38t-35-92q0-54 23.5-110.5T223-653q19-26 28-44t9-29q0-7-2.5-10.5T250-740q-10 0-25 12.5T190-689l-70-71q32-39 65-59.5t65-20.5q46 0 78 32t32 80q0 29-15 64t-50 84q-38 54-56.5 95T220-413q0 17 5.5 26.5T241-377q10 0 17.5-5.5T286-409q13-14 31-34.5t44-50.5q63-75 114-107t107-32q67 0 110 45t49 123h99v100h-99q-8 112-58.5 178.5T554-120Zm2-100q32 0 54-36.5T640-358q-46 11-80 43.5T526-250q0 14 8 22t22 8Z" />
			</svg>
		</label>
		{{ form.title(value=book.title if not form.title.data else form.title.data) }}
	</label>

	<label class="label mt-1 text-white">{{ form.genre.label }}</label>
	<label class="input input-primary w-full mt-1">
		<label class="label">
			<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed">
				<path
					d="M554-120q-54 0-91-37t-37-89q0-76 61.5-137.5T641-460q-3-36-18-54.5T582-533q-30 0-65 25t-83 82q-78 93-114.5 121T241-277q-51 0-86-38t-35-92q0-54 23.5-110.5T223-653q19-26 28-44t9-29q0-7-2.5-10.5T250-740q-10 0-25 12.5T190-689l-70-71q32-39 65-59.5t65-20.5q46 0 78 32t32 80q0 29-15 64t-50 84q-38 54-56.5 95T220-413q0 17 5.5 26.5T241-377q10 0 17.5-5.5T286-409q13-14 31-34.5t44-50.5q63-75 114-107t107-32q67 0 110 45t49 123h99v100h-99q-8 112-58.5 178.5T554-120Zm2-100q32 0 54-36.5T640-358q-46 11-80 43.5T526-250q0 14 8 22t22 8Z" />
			</svg>
		</label>
		{{ form.genre(value=book.genre if not form.genre.data else form.genre.data) }}
	</label>

	<label class="label mt-1 text-white">{{ form.publication_date.label }}</label>
	<label class="input input-primary w-full mt-1">
		<label class="label">
			<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24"
				width="24px" fill="#e8eaed">
				<g>
					<rect fill="none" height="24" width="24" />
					<rect fill="none" height="24" width="24" />
				</g>
				<g>
					<path
						d="M17,2c-0.55,0-1,0.45-1,1v1H8V3c0-0.55-0.45-1-1-1S6,2.45,6,3v1H5C3.89,4,3.01,4.9,3.01,6L3,20c0,1.1,0.89,2,2,2h14 c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2h-1V3C18,2.45,17.55,2,17,2z M19,20H5V10h14V20z M11,13c0-0.55,0.45-1,1-1s1,0.45,1,1 s-0.45,1-1,1S11,13.55,11,13z M7,13c0-0.55,0.45-1,1-1s1,0.45,1,1s-0.45,1-1,1S7,13.55,7,13z M15,13c0-0.55,0.45-1,1-1s1,0.45,1,1 s-0.45,1-1,1S15,13.55,15,13z M11,17c0-0.55,0.45-1,1-1s1,0.45,1,1s-0.45,1-1,1S11,17.55,11,17z M7,17c0-0.55,0.45-1,1-1 s1,0.45,1,1s-0.45,1-1,1S7,17.55,7,17z M15,17c0-0.55,0.45-1,1-1s1,0.45,1,1s-0.45,1-1,1S15,17.55,15,17z" />
				</g>
			</svg>
		</label>
		{{ form.publication_date(value=book.publication_date if not form.publication_date.data else
		form.publication_date.data) }}
	</label>

	<label class="label mt-1 text-white">{{ form.id_author.label }}</label>
	<label class="select select-primary w-full mt-1">
		<label class="label">
			<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24"
				width="24px" fill="#e8eaed">
				<g>
					<rect fill="none" height="24" width="24" y="0" />
				</g>
				<g>
					<path
						d="M20,7h-5V4c0-1.1-0.9-2-2-2h-2C9.9,2,9,2.9,9,4v3H4C2.9,7,2,7.9,2,9v11c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V9 C22,7.9,21.1,7,20,7z M9,12c0.83,0,1.5,0.67,1.5,1.5c0,0.83-0.67,1.5-1.5,1.5s-1.5-0.67-1.5-1.5C7.5,12.67,8.17,12,9,12z M12,18H6 v-0.43c0-0.6,0.36-1.15,0.92-1.39C7.56,15.9,8.26,15.75,9,15.75s1.44,0.15,2.08,0.43c0.55,0.24,0.92,0.78,0.92,1.39V18z M13,9h-2V4 h2V9z M17.25,16.5h-2.5c-0.41,0-0.75-0.34-0.75-0.75v0c0-0.41,0.34-0.75,0.75-0.75h2.5c0.41,0,0.75,0.34,0.75,0.75v0 C18,16.16,17.66,16.5,17.25,16.5z M17.25,13.5h-2.5c-0.41,0-0.75-0.34-0.75-0.75v0c0-0.41,0.34-0.75,0.75-0.75h2.5 c0.41,0,0.75,0.34,0.75,0.75v0C18,13.16,17.66,13.5,17.25,13.5z" />
				</g>
			</svg>
		</label>
		<select name="id_author" id="id_author">
			{% for id, author in authors.items() %}
			<option value="{{ id }}" {% if form.id_author.data|int==id|int or (form.id_author.data is none and
				book.id_author|int==id|int) %} selected {% endif %}>
				{{ author.name }}
			</option>
			{% endfor %}
		</select>
	</label>

	<label class="label mt-1 text-white">{{ form.categories.label }}</label>
	<div class="mt-1 border border-primary rounded-lg p-2">
		{% for category in form.categories.choices %}
		<label class="flex items-center gap-2">
        <input type="checkbox" name="categories" value="{{ category[0] }}" class="checkbox checkbox-primary mt-1" 
            {% if form.categories.data and category[0] in form.categories.data %}
				checked
			{% elif not form.categories.data and category[0] in book.categories | map(attribute='id') and show_update_modal_on_error is false %}
				checked
			{% endif %}
			>
        <span class="text-white">{{ category[1] }}</span>
    </label>
		{% endfor %}
	</div>

	<div class="flex gap-4 mt-4 justify-start flex-row-reverse">
		<button type="submit" class="btn btn-primary">Confirm</button>
</form>
<form method="dialog">
	<a href="{{ url_for('book.book') }}" class="btn btn-primary btn-dash">Close</a>
</form>
</div>